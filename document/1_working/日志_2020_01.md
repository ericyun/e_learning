*# 工作日志

### 修订记录
| 修订说明 | 日期 | 作者 | 额外说明 |
| --- |
| 初版 | 2019/01/07 | 员清观 |  |

## misc

~/work/qts/testcase_data/vplay/play/ 3001.txt文件为vplay的脚本文件

江苏路公司wifi:  office : 1234abcd

**确认**<br>
  分工情况:
  近期任务清单: q3f是否需要测试, 整理测试用例,
  redmine管理, 增加权限, 添加bug来管控问题.

**调试性质启动盘:**<br>
  之后的调试性质启动盘,应该格式化为ext4文件系统; 其他场景保持向前兼容, 找一个合适的方式来判断, 或者使用一个独立的脚本.

**理清个人负责模块:**<br>
  ivan.zhuang - usb otg /frbuffer /usb网口 /uvc /i2c /
  can.cai     - dw_mmc /audio_codec /CCF(common clock framework) /pmu /ether /item /adc /
      pause/resume当前是否有效呢?
  bob.yang    - wifi /upgrade /cep.eventhub /display /net /dvfs(cpu_freq) /


gitk --author=bob.yang

**重建q3f测试流程:**<br>
  1. 检查一下testing文件夹, 哪些测试项目是就绪的.
  2. 整理所有的测试项目, 然后再沟通
  2. 郭东俊 刘艳, 看是否存在appolo3的标准测试过程
  3. 付老师, 了解一下qsdk的基本状况, 比如usb等接口功能的开发程度是否已经完备

**karry, 最好是找个晚餐时间:**<br>
  1. 客户接口
  2. 文档管理, 代码管理git gerrit redmine, bug管理
  3. TestLink系统, 单元测试管理, 自动测试, 压力测试
  4. 客户接口
  5. 研发部门架构:
  6. 开发流程

**auduiobox:**<br>
  1. abctrl命令支持指定默认trace的保存目录
  2. 增加一个新的命令, 原封不动的传递单元测试命令, 现有abctrl debug 支持的外部配置, 命令和参数完整的传输到audiobox后解析执行, 这样, abctrldebug保持同样的版本, 只需要升级audiobox就好

## 12-01->...
## 11-01->...
## 10-01->...
## 09-01->...
## 08-01->...
## 07-01->...
## 06-01->...
## 05-01->...
## 04-01->...
## 03-01->...
## 02-01->...
## 01-02->...
**01-31**<br>
**01-30**<br>
**01-29**<br>
**01-28**<br>
**01-27**<br>
**01-26**<br>
**01-25**<br>
**01-24**<br>
**01-23**<br>
**01-22**<br>
**01-21**<br>
**01-20**<br>
  基本模块：　flash/spi/ftl/mtd/block
**01-19**<br>
触摸屏明显存在性能问题：
  [01-19 20:51:36.402] [    3.849999] [gslX681]-Enter gsl_ts_init
  [01-19 20:51:36.402] [    3.856666] [gslX681] Enter gsl_ts_probe
  [01-19 20:51:36.410] [    3.863333] input: gslx681 as /devices/platform/imap-iic.2/i2c-2/2-0040/input/input2
  [01-19 20:51:37.529] [    5.299999] i2c-core: driver [gslx681] using legacy suspend method
  [01-19 20:51:37.548] [    5.303333] i2c-core: driver [gslx681] using legacy resume method
  [01-19 20:51:37.549] [    5.306666] [gslX681]-i2c_add_driver return 0

显卡驱动明显存在优化空间：

已经尝试的优化：
１．uboot提升spi时钟速度之后，加载kernel加快了2s，这个已经实现；
２．kernel压缩算法从xz改成lzo，应该可以提速2s，但因为flash空间不够，无法实现；

make menuconfig 建议优化配置：
建议１：QSDK options-> Libs -> libffmpeg，是否有些codecs可以精简节省大小
建议２：Filesystem images-> squashfs target filesystem, 压缩算法使用xz对加载应用程序到内存的速度，影响很大
建议３：QSDK options-> Apps -> Videobox, 是否有些IPU可以精简掉

make linux-menuconfig 考虑优化配置：
建议１：File systems-> Miscellaneous filesystems-> SquashFS 4.0, 压缩算法从xz改为lzo，还有use 4k，都能提高读取应用程序速度
建议２：确认drivers/infotm/imapx15/display/implementation/module/logo
建议３：如果没有用到sdio wifi，可以关闭 InfoTM MMC2(SDIO) Driver enable
建议４：没必要开 CMA_MIGRATE_OFF

我用你们发过来的linuxconfig信息编译了一下代码，检查我这边内核编译的二进制目标中，下面这些请考虑优化：
1. size: 1850482 1月  20 09:05 ./drivers/infotm/imapx15/display/implementation/module/logo/built-in.o
2. size: 449429 1月  20 09:06 ./net/ipv6/built-in.o
3. size: 542489 1月  20 09:06 ./net/mac80211/built-in.o
4. size: 121007 1月  20 09:06 ./net/xfrm/built-in.o
5. size: 216682 1月  20 09:05 ./fs/ext3/built-in.o
6. size: 165830 1月  20 09:05 ./fs/jffs2/built-in.o
7. size: 113011 1月  20 09:05 ./fs/ntfs/built-in.o
8. size: 564175 1月  20 09:05 ./fs/ext4/built-in.o
9. size: 131880 1月  20 09:05 ./fs/jbd2/built-in.o
10. 62445 1月  20 09:05 ./fs/ext2/built-in.o
11. 98592 1月  20 09:05 ./fs/exfat/built-in.o

**01-18**<br>
**01-17**<br>
**01-16**<br>
上午儿子打电话，一个人到军区大院玩去了，得意洋洋的

.max_speed_hz = 27000000, 可以考虑提升频率

dma调试，可以查看１. 当前目标或者源地址;2. 通道状态 3.中断和其他标记; 3.loop counter 4.

flash_dma_reset()函数中，重新初始化ssp会导致加载uboot和item失败，下一步可以打印所有的ssp寄存器，确认一组正确的值．

ssp 寄存器列表：
  step 1: ( 0,cc7)( 4,  a)( 8, ff)( c,  3)(10,  2)(14,  0)(18,  8)(1c,  0)(20,  0)(24,  0)(28,  0)
  step 2: ( 0,  0)( 4,  0)( 8,  0)( c,  3)(10,  0)(14,  0)(18,  8)(1c,  0)(20,  0)(24,  0)(28,  0)
  step 3: ( 0,cc7)( 4,  8)( 8,  0)( c,  3)(10,  2)(14,  0)(18,  8)(1c,  0)(20,  0)(24,  0)(28,  0)
  step 4: ( 0,cc7)( 4,  8)( 8,  0)( c,  3)(10,  2)(14,  0)(18,  8)(1c,  0)(20,  0)(24,  0)(28,  0)

dma传输过程中，读取　SSP_SR_0　为 3

**01-15**<br>
调试uboot问题的时候, 可以修改 system_update_upgrade() 函数,
需要10项软件著作权，才可以申请高新技术企业．模块包含1500行以上代码就可以申请
1. audiobox 框架 2. AEC 3. FTL 4. videobox 5. 影子端口 6. FR内存管理 7. 人脸侦测优化 8. sensor bridge
9. 鱼眼矫正 10. 视频播放 11. 视频录像 12. mv的移动侦测

**01-14**<br>
分解任务, 建立了几个bug, 安一周的问题分出去
**01-13**<br>
浏览平台软件release的文档, 了解
**01-12**<br>
周日加班. 早起到六院挂号, 结果周日确实是没有门诊的, 网上的信息真是坑人啊.
晚上公司聚会. jim胆结石, 对酒精也过敏.
好好思考一下, 提供什么样的接口给客户:
  就上层应用而言, 最好是一个单独的image, 但这样一定需要同步提供完整的诊断机制.

  内核和驱动呢? 实际上, 客户不可避免的会对这个部分有修改.
  如何解决上层模块和驱动之间的依赖关系呢? 比如音频开发, 是否几个sound驱动模块增加一个版本号, devices.c也应该去掉关于sound的初始化代码, 而转移到sound的init函数, 在audiobox之类的模块增加对版本的依赖判断, 读取下层驱动版本号, 不匹配的话直接报告. 还有是否每个codecs之类的库也应该增加版本,audiobox会做相应的判断.
  audiobox应该保持多个版本号, 一个作为自身的累加版本(可能qplayer和abctrl对他有依赖), 其他对应各个依赖模块.

给客户的release notes, 版本号应该更加鲜明的指示数据结构的变化.

**01-11**<br>
周六. 国际象棋考级, 武宁小学, 因为失利和丢失一个圆珠笔, 儿子吵着要撞墙, 第三遍时因为喋喋不休被训.
老婆的脚很像是脚底板发炎了, 然后导致手上也有炎症性疼痛, 如果耽搁治疗, 担心会有后遗症.
**01-10**<br>
周五,请假. 带老婆儿子上医院, 小熊的流感终于好了, 可老婆的病没有确诊, 风湿免疫科-发热门诊-感染科-骨科, 一通瞎搞.
**01-09**<br>
研发部: 杨洁琼 庞松华 胡彦艳-财? 杨文正-杨老师-杨总;  陈鹏 员清观 郑万虎
**01-08**<br>
首要任务是, 找到所有的q3f平台功能测试用例和结果预判.
**01-04-05-06-07**<br>
公司搬家
**01-02**<br>
今天同学们基本都走光了, 办公室空荡荡的, 感觉说话都有回声, 有点风萧萧兮易水寒的感慨;

无论来年公司是何种走向, 需要保持初心: 认真思考和整理一下之前三年在公司的点点滴滴. 目标: 在不确定的离开之前, 要真正能够开发掌控一个独立的大型软件模块, 要有成为系统架构师的信心

## 系统架构师相关内容整理

核心思想之一: `去耦合, 去重复`

**模块设计**
1. 分层架构设计: 需要有分离分层的思想,层次之间通过api接口调用,不要产生数据上的耦合;并且注意处理上层多个模块对相同功能的调用接口,不要出现太多的冗余api接口
2. 模块化: 模块功能要划分清晰.大模块使用独立的进程, 线程之间也尽量的模块化,即使不是对象编程, 也应该尽量把一个大的进程分割成若干个独立的小模块. 进程和线程之间通信注意要架构清晰,接口简单去耦合
3. 封装常用功能: 如实现工具类，和帮助类，时间或者定时调用, 线程池, 日志和调试诊断, 自动测试机制, 同时要保存好，（耦合性低）以后开发直接拿出来用。
4. 注册回调框架: 数据和算法多选一的时候, 比如aec部分, 切换不同算法直接使用, 避免每次出现长窜的switch-case语句
5. 事件状态管理框架: 类似eventhub这样的接口, 用于管理系统内部的状态，基本思想上订阅发布机制（也称观察者模式），有了它，代码就不用再去请求一堆状态数据了，只需要把你关注打事件或者状态注册一下，当事件发生时，就主动通知给你了。

进程内拆开的小模块, 尽量能够做到外部能够直接进行单元测试. 比如音频模块下, 可以直接导入外部的配置和音频文件进行测试. 如果能够多个小模块可以从外部配置进行关联测试, 就更好了. 类似与ipc.json文件所定义的. 是否audiobox模块也应该定义类似的解析接口, 根据外部配置文件定义的信息进行功能测试呢? 这个解析直接在audiobox模块实现, 可以更加方便的安排单元测试和自动测试.是否应该继续改造audiobox模块, 作为我之后开发的魔板呢?



## 小熊湿疹

湿热还是寒湿 :    http://www.sohu.com/a/249992438_707230

静安牙防所，早上7点开始排队，7点45开始挂号，8点开始门诊，儿童必须本人到场。
1. 皮肤清洁也很重要，不要怕洗澡，洗完澡之后马上用一些保湿霜润肤
    全身保湿; 应该使用酸性的沐浴，避免碱性肥皂; 秋冬季节干燥，润肤剂尤其要保持使用; 避免冷风或强烈日晒
2. 饮食控制．多食蔬菜和水果，禁止海苔海带海鱼，酸奶，冰淇淋等冷饮，肥肉、奶油蛋糕、巧克力
3. 生活环境控制：最近的换床会否有影响呢? 每周更换床单和枕巾等。
    尽量不要养宠物，尽量不要种鲜花，不要用地毯
    家里也不要养花了。 纯棉的衣服，不要让宝宝穿易刺激皮肤的衣服，如羊毛、丝、尼龙; 修短指甲
4. 主动治疗：是否需要做脱敏治疗呢？
5. 放大镜找螨虫

**得了湿疹吃什么好**<br>
　　番茄。番茄内含丰富的维生素A、维生素B1、维生素B2、维生素C、烟酸，维生素E;还含有苹果酸、柠檬酸，钙、磷、铁及番茄碱等物质。具有生津止咳、健胃消食、凉血平肝、清热等功效。番茄中的果酸对维生素C有保护作用，故而能有效地补充维生素C;番茄碱有抑菌消炎、降低血管通透性作用，所以外用番茄汁治疗湿疹可起到止痒收敛的作用。
　　苦瓜。苦瓜内含奎宁。具有清热解毒、祛湿止痒之功。可用于治疗热毒、疖疮、痱子、湿疹等病症。
　　韭菜。韭菜内含胡萝卜素、维生素B、维生素C及钙。磷、铁、蛋白质、纤维素等。韭菜还有解毒祛湿的功效，故韭菜汁外搽可治湿疹。

钙磷酸酶抑制剂 不含激素，据说效果不错，但比较贵。

主持人：特应性皮炎药物治疗配合润肤剂剂使用频率是什么样的？
顾恒：首先，皮肤干燥是特应性皮炎的诊断标准之一，因此每天使用润肤剂是必不可少的。不同的季节可以选择不同类型的润肤剂，在冬季可以使用油脂性强一点的润肤剂，到了夏季可以使用稍微稀润一点或者油脂性弱一点的润肤剂。如果一些患者病情反复发作，发病比较频繁，可以使用钙调磷酸酶抑制剂这些能够安全有效，且可以长期使用的外用药物治疗。并且在控制住病情后，改用一周2次的长期维持治疗来减少复发频率和严重程度。钙调磷酸酶抑制剂不会出现使用激素类药物的皮肤萎缩、毛细血管扩张不良反应。

正确治疗有五部曲，在经过正确的治疗后，特应性皮炎是可以得到控制和缓解，这样花的代价最小，副反应也是最小。
1.首先，皮肤日常基本护理就是要保护皮肤，使受损的皮肤屏障功能慢慢恢复。通过使用保湿霜或者润肤露都可以起到保护皮肤湿润的功能。另外，皮肤清洁也很重要，不要怕洗澡，洗完澡之后马上用一些保湿霜润肤。
2.其次就是基本的药物治疗，基本的药物治疗就是外用药，对于儿童特应性皮炎患者，一般选用温和的中效或者弱效激素，而不要选用强效激素或者含卤素元素的激素。同时还可以用非激素类药膏，代表就是他克莫司软膏。
3.另外，根据症状，如果瘙痒的非常严重，可以吃一些镇静类的药物，镇静药物可以用西利琴或者罗瑞它丁。如果这些治疗不能完全缓解控制疾病，就需要系统治疗，比如内服激素类药物和免疫抑制剂药物。如果合并细菌感染，则同时需要用一些局部的抗生素软膏进行治疗

## 今年的书单
记录在印象笔记中实在是有些诡异, 转移到这里吧, 每年
